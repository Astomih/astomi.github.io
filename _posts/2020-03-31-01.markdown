---
layout: post
title:  VisualStudio2019で文字コードをUTF-8にして保存・実行する
tags: VisualStudio
---
## 経緯
最近、SDL2.0を使ってゲームを作っているが、文字の描画に使用しているSDL_ttfで日本語が表示されなかった。
原因は単純(ではないかもしれない)で、Visual Studioの標準文字コードがShift-JIS(or UTF-16？)とか何とかからだった。この辺の文字コードについての知識はまともに勉強していないので曖昧である。よってこの記事は的外れな可能性がある。

しょうがないのでUTF-8にしようとしたら思いの外苦戦したため、記事を書くことにした。

## 手順
まずは、メニューの【プロジェクト】→【（プロジェクト名）のプロパティ】を開く。

【構成プロパティ】→【詳細】の【文字セット】を、<b>マルチバイト文字セットを使用する</b>になっているか確認する。
![](/assets/20200331214923.jpg)

次に、【構成プロパティ】→【C/C++】→【コマンドライン】の【追加のオプション】に、
```
/source-charset:utf-8 /execution-charset:utf-8 
```
と入力する。
![](/assets/20200331215314.jpg)

そうすると、ソースのコンパイルと実行をUTF-8にエンコードしてやってくれる。らしい。

## 参考

[https://docs.microsoft.com/ja-jp/cpp/build/reference/source-charset-set-source-character-set?view=vs-2019](https://docs.microsoft.com/ja-jp/cpp/build/reference/source-charset-set-source-character-set?view=vs-2019)


[https://docs.microsoft.com/ja-jp/cpp/build/reference/execution-charset-set-execution-character-set?view=vs-2019:title](https://docs.microsoft.com/ja-jp/cpp/build/reference/execution-charset-set-execution-character-set?view=vs-2019)
